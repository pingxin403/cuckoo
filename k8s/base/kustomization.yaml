apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Metadata
metadata:
  name: monorepo-base
  annotations:
    description: "Base Kubernetes resources for Monorepo Hello/TODO Services"

# Namespace for all resources
namespace: default

# Common annotations applied to all resources
commonAnnotations:
  documentation: "https://github.com/myorg/myrepo"
  contact: "platform-team@example.com"

# Resources to include
# Note: Kustomize requires all resources to be within or below the kustomization directory
# We'll use a different approach - create symlinks or copy files to k8s/base/resources/
resources:
  - hello-service-deployment.yaml
  - hello-service-service.yaml
  - hello-service-configmap.yaml
  - todo-service-deployment.yaml
  - todo-service-service.yaml
  - ingress.yaml

# Images (can be overridden in overlays)
images:
  - name: hello-service
    newName: hello-service
    newTag: latest
  - name: todo-service
    newName: todo-service
    newTag: latest

# ConfigMap generator (optional, for additional config)
configMapGenerator:
  - name: platform-config
    literals:
      - ENVIRONMENT=base
      - LOG_LEVEL=info
      - ENABLE_METRICS=true

# Secret generator (optional, for sensitive data)
# secretGenerator:
#   - name: platform-secrets
#     literals:
#       - DATABASE_PASSWORD=changeme

# Replicas (can be overridden in overlays)
replicas:
  - name: hello-service
    count: 2
  - name: todo-service
    count: 2

# Resource name prefix (optional)
# namePrefix: monorepo-

# Resource name suffix (optional)
# nameSuffix: -v1

# Labels to add to all resources
labels:
  - pairs:
      project: monorepo-platform
      managed-by: kustomize
      environment: base
      app.kubernetes.io/part-of: monorepo-platform
      app.kubernetes.io/managed-by: kustomize
