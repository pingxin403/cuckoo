apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Metadata
metadata:
  name: monorepo-development
  annotations:
    description: "Development overlay for Monorepo Hello/TODO Services"

# Base configuration
bases:
  - ../../base

# Override namespace for development
namespace: development

# Development-specific labels
commonLabels:
  environment: development
  tier: development

# Development-specific annotations
commonAnnotations:
  deployment.kubernetes.io/revision: "dev"
  monitoring: "disabled"

# Override replicas for development (single instance)
replicas:
  - name: hello-service
    count: 1
  - name: todo-service
    count: 1

# Override images with development tags
images:
  - name: hello-service
    newName: hello-service
    newTag: dev
  - name: todo-service
    newName: todo-service
    newTag: dev

# ConfigMap generator for development config
configMapGenerator:
  - name: platform-config
    behavior: merge
    literals:
      - ENVIRONMENT=development
      - LOG_LEVEL=debug
      - ENABLE_METRICS=false
      - ENABLE_TRACING=false

# Strategic merge patches for development-specific changes
patchesStrategicMerge:
  - resources-patch.yaml
