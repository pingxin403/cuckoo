# IM Gateway Service Configuration Example
# Copy this file to config.yaml and adjust values as needed

# Server configuration
server:
  grpc_port: 9097
  http_port: 8080

# Redis configuration
redis:
  addr: "localhost:6379"
  password: ""
  db: 0
  pool_size: 10
  min_idle_conns: 5

# Kafka configuration
kafka:
  brokers:
    - "localhost:9092"
  topic: "offline_msg"

# Etcd configuration
etcd:
  endpoints:
    - "localhost:2379"
  dial_timeout: 5s
  username: ""
  password: ""

# Service Discovery configuration
service_discovery:
  auth_service_addr: "localhost:9095"
  im_service_addr: "localhost:9094"

# Observability configuration
observability:
  service_name: "im-gateway-service"
  service_version: "1.0.0"
  environment: "development"  # development, staging, production
  enable_metrics: true
  metrics_port: 9090
  log_level: "info"  # debug, info, warn, error
  log_format: "json"  # json, text

# Environment Variable Mapping:
# ==============================
# SERVER_GRPC_PORT         -> server.grpc_port
# SERVER_HTTP_PORT         -> server.http_port
#
# REDIS_ADDR               -> redis.addr
# REDIS_PASSWORD           -> redis.password
# REDIS_DB                 -> redis.db
# REDIS_POOL_SIZE          -> redis.pool_size
# REDIS_MIN_IDLE_CONNS     -> redis.min_idle_conns
#
# KAFKA_BROKERS            -> kafka.brokers (comma-separated)
# KAFKA_TOPIC              -> kafka.topic
#
# ETCD_ENDPOINTS           -> etcd.endpoints (comma-separated)
# ETCD_DIAL_TIMEOUT        -> etcd.dial_timeout
# ETCD_USERNAME            -> etcd.username
# ETCD_PASSWORD            -> etcd.password
#
# SERVICE_DISCOVERY_AUTH_SERVICE_ADDR -> service_discovery.auth_service_addr
# SERVICE_DISCOVERY_IM_SERVICE_ADDR   -> service_discovery.im_service_addr
#
# OBSERVABILITY_SERVICE_NAME    -> observability.service_name
# OBSERVABILITY_SERVICE_VERSION -> observability.service_version
# OBSERVABILITY_ENVIRONMENT     -> observability.environment
# OBSERVABILITY_ENABLE_METRICS  -> observability.enable_metrics
# OBSERVABILITY_METRICS_PORT    -> observability.metrics_port
# OBSERVABILITY_LOG_LEVEL       -> observability.log_level
# OBSERVABILITY_LOG_FORMAT      -> observability.log_format
#
# Legacy environment variables (still supported for backward compatibility):
# PORT                     -> server.http_port
# GRPC_PORT                -> server.grpc_port
# AUTH_SERVICE_ADDR        -> service_discovery.auth_service_addr
# IM_SERVICE_ADDR          -> service_discovery.im_service_addr
# SERVICE_NAME             -> observability.service_name
# SERVICE_VERSION          -> observability.service_version
# DEPLOYMENT_ENVIRONMENT   -> observability.environment
